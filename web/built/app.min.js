function sendForm(form,callback){var values={};$.each(form[0].elements,function(i,field){("checkbox"!=field.type||"checkbox"==field.type&&field.checked)&&(values[field.name]=field.value)}),$.ajax({type:form.attr("method"),url:form.attr("action"),data:values,success:function(result){callback(result)}})}function handleForm(targetField,modal,form,formSelector){form.find(":submit").click(function(e){e.preventDefault(),sendForm(form,function(response){"object"==typeof response?(targetField.append($("<option>",{value:response.id,text:response.name})).val(response.id),modal.modal("hide")):(form.find(":submit").unbind("click"),modal.find(".modal-body").html(response),handleForm(targetField,modal,$(formSelector),formSelector))})})}function charMap(fieldHandler){for(var chars=["αβΔδε","θλμπρ","σφχψω","©®™"],charsArray=[],i=0;i<chars.length;i++)charsArray[i]=chars[i].split("");for(var table=$('<table class="table table-bordered text-center">'),i=0;i<charsArray.length;i++){for(var tr="<tr>",j=0;j<charsArray[i].length;j++){var td="<td>";td+=charsArray[i][j],td+="</td>",tr+=td}tr+="</tr>",table.append(tr)}table.append("</table>"),table.on("click","td",function(e){fieldHandler.val(fieldHandler.val()+$(this).text()),fieldHandler.focus()}),fieldHandler.after(table),table.hide(),fieldHandler.focus(function(){table.show()}),$("body").click(function(e){e.target!=fieldHandler[0]&&0==table.find(e.target).length&&table.hide()})}function collectionType(container,buttonText,buttonId,fieldStart,functions){function addField(container){var $prototype=$(container.attr("data-prototype").replace(/class="col-sm-2 control-label required"/,'class="col-sm-2 control-label"').replace(/__name__label__/g,"").replace(/__name__/g,index));addDeleteButton($prototype),addFunctions($prototype),$addButton.before($prototype),index++}function addDeleteButton(prototype){var $deleteButton=$('<div class="col-sm-1"><a href="#" class="btn btn-danger btn-sm"><span class="glyphicon glyphicon-trash"></span></a></div>');$(".col-sm-10",prototype).removeClass("col-sm-10").addClass("col-sm-9"),prototype.append($deleteButton),$deleteButton.click(function(e){return e.preventDefault(),prototype.remove(),!1})}function addFunctions(prototype){if(functions.length>0)for(var i=0;functions.length>i;i++)functions[i](prototype)}if(void 0===buttonId&&(buttonId=null),void 0===fieldStart&&(fieldStart=!1),void 0===functions&&(functions=[]),container.children("div").find("label:first").text(""),container.children("div").find("label:first").removeClass("required"),container.children("div").find("label:first").removeClass("required"),buttonId)var id="id='"+buttonId+"'",$addButton=$('<a href="#" '+id+'class="btn btn-default btn-xs"><span class="glyphicon glyphicon-plus"></span> '+buttonText+"</a>");else var $addButton=$('<a href="#" class="btn btn-default btn-xs"><span class="glyphicon glyphicon-plus"></span> '+buttonText+"</a>");container.append($addButton),$addButton.click(function(e){return e.preventDefault(),addField(container),!1});var index=container.children("div").length;index>0&&container.children("div").each(function(){addDeleteButton($(this)),addFunctions($(this))}),1==fieldStart&&0==index&&addField(container)}function onProjectChange(container){var $type=$('[name$="[type]"]'),$species=$('[name$="[species]"]'),$project=$(container).find('[name$="[project]"]'),$box=$(container).find('[name$="[box]"]');$project.change(function(){var $form=$(this).closest("form"),data={};data[$type.attr("name")]=$type.val(),data[$species.attr("name")]=$species.val(),data[$project.attr("name")]=$project.val(),data[$box.attr("name")]=$box.val(),$.ajax({url:$form.attr("action"),type:$form.attr("method"),data:data,success:function(html){$(container).find('[name$="[box]"]').replaceWith($(html).find('[name$="[box]"]')),$(container).find('[name$="[cell]"]').replaceWith($(html).find('[name$="[cell]"]')),onBoxChange(container)}})})}function onBoxChange(container){var $type=$('[name$="[type]"]'),$species=$('[name$="[species]"]'),$project=$(container).find('[name$="[project]"]'),$box=$(container).find('[name$="[box]"]');$box.change(function(){var $form=$(this).closest("form"),data={};data[$type.attr("name")]=$type.val(),data[$species.attr("name")]=$species.val(),data[$project.attr("name")]=$project.val(),data[$box.attr("name")]=$box.val(),$.ajax({url:$form.attr("action"),type:$form.attr("method"),data:data,success:function(html){$(container).find('[name$="[cell]"]').replaceWith($(html).find('[name$="[cell]"]'))}})})}$(document).ready(function(){function showHideStrainField(){$countryField=$("#advanced_search_country").closest(".form-group"),$projectField=$("#advanced_search_project").closest(".form-group"),$typeField=$("#advanced_search_type").closest(".form-group"),$deletedField=$("#advanced_search_deleted").closest(".form-group"),$countryField.show(),$projectField.show(),$typeField.show(),$deletedField.show(),$gmoStrainCheckbox.is(":checked")||$wildStrainCheckbox.is(":checked")?$wildStrainCheckbox.is(":checked")||$countryField.hide():($countryField.hide(),$projectField.hide(),$typeField.hide(),$deletedField.hide())}var $gmoStrainCheckbox=$("#advanced_search_category_0"),$wildStrainCheckbox=$("#advanced_search_category_1");showHideStrainField(),$gmoStrainCheckbox.change(function(){showHideStrainField()}),$wildStrainCheckbox.change(function(){showHideStrainField()})}),top!=self&&(top.location.href=location.href);var delay=function(){var timer=0;return function(callback,ms){clearTimeout(timer),timer=setTimeout(callback,ms)}}();$(function(){$("#strain_gmo_name, #strain_wild_name").autocomplete({minLength:2,source:function(request,response){$.ajax({url:Routing.generate("strain_search",{name:$("#strain_gmo_name, #strain_wild_name").val()}),dataType:"json",success:function(data){var items=[];$.each(data,function(key,val){items.push(val)}),response(items)}})}})}),function(){"use strict";if(navigator.userAgent.match(/IEMobile\/10\.0/)){var msViewportStyle=document.createElement("style");msViewportStyle.appendChild(document.createTextNode("@-ms-viewport{width:auto!important}")),document.querySelector("head").appendChild(msViewportStyle)}}(),$(document).on("submit","form[data-confirmation]",function(event){var $form=$(this),$confirm=$("#confirmationModal");"yes"!==$confirm.data("result")&&(event.preventDefault(),$confirm.off("click","#btnYes").on("click","#btnYes",function(){$confirm.data("result","yes"),$form.find('input[type="submit"]').attr("disabled","disabled"),$form.submit()}).modal("show"))}),$(document).ready(function(){$('input[name$="[addGenBankFile]"][value=0]').prop("checked")&&$("#genBank-file-field").hide(),$('input[name$="[addGenBankFile]"]').change(function(){$("#genBank-file-field").toggle("slow")})}),$(document).ready(function(){$("#quick-search-form").submit(function(event){event.preventDefault();var $keyword=$("input:first").val();""!==$keyword&&null!==$keyword&&$(location).attr("href",Routing.generate("quick-search",{keyword:$keyword}))})}),$.fn.select2.defaults.set("theme","bootstrap");
//# sourceMappingURL=app.map